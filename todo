## BUGS
- statusmessage state is being used to display errors (player join view tsx)
- if player is disconnected in the result page, disconnected icon does not show in leaderboard
- dont allow the same avatar to be picked by multiple players
- long username limit/truncation
- Trailing dots may go to the next line on smaller screens
- make the leaderboard on host more compact. its scrolling too much cant see progress bar
- if x players start the game but one drops off and the remianing players submit their answers, question round should end
- when a player submits a correct answer, it should show the green correct like the incorrect one
- when player is resubmitting an answer, show "try again for x points"
- i typed in the correct answer but it said incorrect on the immediate feedback but correct on the round result screen (maybe lowercase issue)
- first load doesnt show anything on the home page


## ENHANCEMENTS
- when comparing submitted answer to correct answer, do a lowercase of both and then compare
- rebus and trivia should have diff rooms
- add game rules/ scoring to the lobby of each game
- Add types all across the app
- game library can be a crousel with horizontal scroll
- deleting a pack
- store pack images to s3
- ai to match a users input to the correct answer
- if you click on the room code on the top left, open up a modal with the qr code

## FEATURES
- connect to rebus db for live rebus
- sound effects
    - ticking sound during last 5 seconds
    - sound when time is up
    - sound when answer is submitted
- Skeleton
    - Use Shadcn UI's Skeleton component to show loading states
    - Show loading sign on the main screen before launching the game
- (later) store avatars in neondb
- (later) store userids in neondb
- (later) create user accounts
- (later) repick an avatar


## Larger ideas
- Users should be able to create their own trivia questions and submit it to a database. We should then be able to review and add it to the game packs.
- They should get rewarded with some in-app currency for every approved submission.
- Let players emote during the game
    - thumbs up, clap, laugh, etc.
    - show a small animation on the player view when an emote is sent
    - limit the number of emotes per game to avoid spam
- (later) player extra time request 
    - add an option to request for an extra 15 seconds on the player view
    - if everyone requests it, add 15 seconds to the timer. 
    - show a small counter of how many people have requested extra time on the host view.
- (later) create host account to purchase packs

## Different game layouts
- Common landing page layout for all games extracted out from host-game-layout.tsx
- Each game layout should accept a gameData and roomState prop to deal with common room related state as well as specific game data.


## Room Code Management
- Room code Uniqueness: Ensure generated room codes are unique and not currently in use.
- Room code Sanitization: Remove ambiguous characters if you use numbers (e.g., remove 'I', '1', '0', 'O').
- Also avoid offensive words in room codes.

### Room management plan
- When the server gets a request to create_room, it should generate a unique room code and store it in redis with a TTL of 1 hour.
- If the room code already exists in redis, it should generate a new one and try again.
- Heartbeats: As long as the Host is connected via WebSocket, send a "heartbeat" every minute to reset the TTL to 1 hour. This ensures active rooms stay open, but if the Host crashes or closes the tab, the room expires automatically after an hour.

In redis, we will store the room code as the key and the room data as the value. The room data will be a JSON object with the following structure:

{
    host_id: string,
    created_at: string,
    updated_at: string,
    expires_at: string,
    game_type: string,
}

## Disconnection plan
- If the host disconnects, pause the game and show a message to the players
- Remove the logic from server.ts that deletes the room when there is nobody in the room

## Host promotion makes no sense
- It needs to be removed because there can be only one host and the players cannot be promoted to host.

## Reconnection plan
- The server should store all the room data like game state, player data, etc. in memory
- When the server gets a request to `reconnect_room:host` or `reconnect_room:player`, it should check if the room exists in memory and if the user that's trying to reconnect is in the room
- If the room exists and the user is in the room, it should return the room data to the client
- If the room does not exist or the user is not in the room, it should return a 404 error

## Game end action button
- Show a recommendation marquee at the end of the game with the list of other packs available to play.