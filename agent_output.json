{
  "agent": "refactor",
  "status": "success",
  "repo": "/Users/karanrajpal/Kouch",
  "branch": "",
  "had_changes": false,
  "analysis_output": "[\n  {\n    \"title\": \"Duplicate Pattern #1: Similar functions\",\n    \"summary\": \"Detected 16 occurrences of a Similar functions (approx 6 lines)\",\n    \"locations\": [\n      \"src/components/ui/table.tsx (lines 5-8)\",\n      \"src/components/ui/table.tsx (lines 19-22)\",\n      \"src/components/ui/table.tsx (lines 27-30)\",\n      \"src/components/ui/table.tsx (lines 39-42)\",\n      \"src/components/ui/table.tsx (lines 54-57)\",\n      \"src/components/ui/table.tsx (lines 69-72)\",\n      \"src/components/ui/table.tsx (lines 84-87)\",\n      \"src/components/ui/table.tsx (lines 96-99)\",\n      \"src/components/ui/tabs.tsx (lines 8-13)\",\n      \"src/components/ui/tabs.tsx (lines 25-28)\"\n    ],\n    \"snippet\": \"{ className, ...props }\",\n    \"severity\": \"High\",\n    \"impact\": \"Maintainability and bug risk\",\n    \"recommendation\": \"Extract shared code to src/components/ui or src/hooks or src/lib as appropriate\"\n  },\n  {\n    \"title\": \"Duplicate Pattern #2: Similar functions\",\n    \"summary\": \"Detected 7 occurrences of a Similar functions (approx 5 lines)\",\n    \"locations\": [\n      \"src/app/api/admin/trivia/packs/[id]/route.ts (lines 8-10)\",\n      \"src/app/api/admin/trivia/packs/[id]/route.ts (lines 12-14)\",\n      \"src/app/api/admin/trivia/packs/route.ts (lines 8-10)\",\n      \"src/app/api/admin/trivia/questions/[id]/route.ts (lines 7-11)\",\n      \"src/app/api/admin/trivia/questions/[id]/route.ts (lines 13-15)\",\n      \"src/app/api/admin/trivia/questions/route.ts (lines 13-17)\",\n      \"src/app/api/admin/trivia/tags/route.ts (lines 12-14)\"\n    ],\n    \"snippet\": \"{\\n  return NextResponse.json({ error: message }, { status: 400 });\\n}\",\n    \"severity\": \"High\",\n    \"impact\": \"Maintainability and bug risk\",\n    \"recommendation\": \"Extract shared code to src/components/ui or src/hooks or src/lib as appropriate\"\n  },\n  {\n    \"title\": \"Duplicate Pattern #3: Similar functions\",\n    \"summary\": \"Detected 2 occurrences of a Similar functions (approx 17 lines)\",\n    \"locations\": [\n      \"src/app/api/admin/trivia/questions/[id]/route.ts (lines 30-46)\",\n      \"src/app/api/admin/trivia/questions/route.ts (lines 32-48)\"\n    ],\n    \"snippet\": \"{\\n  const tags: TriviaTag[] = [];\\n  for (const tagName of tagNames) {\\n    const [tag] = (await tx`\\n      INSERT INTO trivia_tags (name)\\n      VALUES (${tagName})\\n      ON CONFLICT (name) DO UPDATE SET updated_at = now()\\n      RETURNING id, name, description, user_id, created_at, updated_at;\\n    `) as unknown as TriviaTag[];\\n\\n    tags.push(tag);\\n  }\\n  return tags;\\n}\",\n    \"severity\": \"Medium\",\n    \"impact\": \"Maintainability and bug risk\",\n    \"recommendation\": \"Extract shared code to src/components/ui or src/hooks or src/lib as appropriate\"\n  }\n]",
  "pr_output": ""
}